{% load static %}
<!DOCTYPE html>


<html lang="en">
<head>

  <!-- ** Basic Page Needs ** -->
  <meta charset="utf-8">
  <title>CUSTOM PRODUCT DESIGNER</title>

  <!-- ** Mobile Specific Metas ** -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="description" content="Agency HTML Template">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
  <meta name="author" content="Themefisher">
  <meta name="generator" content="Themefisher Classified Marketplace Template v1.0">
  
  <!-- theme meta -->
  <meta name="theme-name" content="classimax" />

  <!-- favicon -->
  <link href="{% static 'indexstyle/images/favicon.png' %}" rel="shortcut icon">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">


  <!-- 
  Essential stylesheets
  =====================================-->
  <link href="{% static 'indexstyle/plugins/bootstrap/bootstrap.min.css' %}" rel="stylesheet">
  <link href="{% static 'indexstyle/plugins/bootstrap/bootstrap-slider.css' %}" rel="stylesheet">
  <link href="{% static 'indexstyle/plugins/font-awesome/css/font-awesome.min.css' %}" rel="stylesheet">
  <link href="{% static 'indexstyle/plugins/slick/slick.css' %}" rel="stylesheet">
  <link href="{% static 'indexstyle/plugins/slick/slick-theme.css' %}" rel="stylesheet">
  <link href="{% static 'indexstyle/plugins/jquery-nice-select/css/nice-select.css' %}" rel="stylesheet">
  
  <link href="{% static 'indexstyle/css/style.css' %}" rel="stylesheet">

</head>

<body class="body-wrapper">


	<header class="custom-header">
		<div class="container">
			<div class="row align-items-center">
				<div class="col-md-12">
					<nav class="navbar navbar-expand-lg navbar-light navigation">
						<!-- Logo -->
						<a href="#" class="logo">
							<img id="animatedLogo" src="{% static 'indexstyle/images/Screenshot 2025-02-28 151015.png' %}" alt="Logo">
						</a>
	
						<!-- Mobile Menu Button -->
						<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
							aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
							<span class="navbar-toggler-icon"></span>
						</button>
	
						<!-- Navbar Links -->
						<div class="collapse navbar-collapse" id="navbarSupportedContent">
							<ul class="navbar-nav ml-auto main-nav">
								<li class="nav-item active">
									<a class="nav-link" href="{% url 'designerdashboard' %}">
										<i class="fas fa-home"></i> Home
									</a>
								</li>
								<li class="nav-item">
									<a class="nav-link" href="{% url 'profile' %}">
										<i class="fas fa-user-circle"></i> My profile
									</a>
								</li>
								<li class="nav-item">
                  <a class="nav-link" href="{% url 'allocated_jobs' %}">
                      <i class="fas fa-tasks"></i> Allocated 
                  </a>
              </li>
              <li class="nav-item">
                  <a class="nav-link" href="{% url 'completed_jobs' %}">
                      <i class="fas fa-check-circle"></i> Completed 
                  </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="{% url 'notify_design_requests_list' %}">
                    <i class="fas fa-check-circle"></i> Salary
                </a>
            </li>
								
							</ul>
							<ul class="navbar-nav ml-auto">
								<li class="nav-item">
									<a class="nav-link logout-button" href="{% url 'login_view' %}">
										<i class="fas fa-sign-out-alt"></i> Log Out
									</a>
								</li>
							</ul>
						</div>
					</nav>
				</div>
			</div>
		</div>
	</header>
	
	<!-- CSS Styling -->
	<style>
    <style>
      /* Custom Header Styling with Glassmorphism */
      .custom-header {
        background: white; /* Glass effect */
        backdrop-filter: blur(15px);
        padding: 15px 0;
        box-shadow: white;
        position: fixed;
        width: 100%;
        z-index: 1000;
        transition: all 0.3s ease-in-out;
        border-radius: 0 0 15px 15px;
      }
      
      /* Sticky Header Effect */
      .custom-header.scrolled {
        background: white;
        transition: 0.3s;
        padding: 10px 0;
      }
      
      /* Background Glow Animation */
      @keyframes headerGlow {
        0% { box-shadow: 0 0 10px rgba(255, 165, 0, 0.6); }
        50% { box-shadow: 0 0 20px rgba(255, 69, 0, 0.8); }
        100% { box-shadow: 0 0 10px rgba(255, 165, 0, 0.6); }
      }
      
      .custom-header {
        animation: headerGlow 3s infinite alternate;
      }
      
      /* Logo Animation */
      .logo img {
        max-height: 50px;
        transition: transform 0.3s ease-in-out;
      }
      
      .logo img:hover {
        transform: rotate(5deg) scale(1.1);
      }
      
      /* Navbar Links */
      .navbar-nav .nav-link {
        font-size: 18px;
        font-weight: 600;
        color: black !important;
        margin: 0 12px;
        transition: all 0.3s ease-in-out;
        display: flex;
        align-items: center;
        gap: 8px;
        position: relative;
      }
      
      /* Glowing Hover Effect */
      .navbar-nav .nav-link::after {
        content: "";
        display: block;
        height: 3px;
        width: 0;
        background: linear-gradient(to right, #ffcc00, #ff4b2b);
        transition: width 0.3s ease-in-out;
        position: absolute;
        bottom: -4px;
        left: 0;
      }
      
      .navbar-nav .nav-link:hover::after {
        width: 100%;
      }
      
      .navbar-nav .nav-link i {
        font-size: 20px;
      }
      
      /* Logout Button */
      .logout-button {
        background: linear-gradient(135deg, #ff416c, #ff4b2b);
        color: white !important;
        padding: 10px 20px;
        border-radius: 10px;
        font-weight: bold;
        transition: all 0.3s ease-in-out;
        display: flex;
        align-items: center;
        gap: 8px;
        box-shadow: 0px 4px 10px rgba(255, 65, 108, 0.4);
      }
      
      .logout-button:hover {
        background: linear-gradient(135deg, #e52e71, #ff416c);
        transform: scale(1.05);
        box-shadow: 0px 4px 15px rgba(255, 65, 108, 0.6);
      }
      
      /* Mobile Menu Button */
      .navbar-toggler {
        border: none;
        outline: none;
      }
      
      .navbar-toggler:focus {
        box-shadow: none;
      }
      
      /* Responsive Design */
      @media (max-width: 768px) {
        .navbar-nav {
          text-align: center;
        }
        
        .navbar-nav .nav-item {
          margin-bottom: 10px;
        }
        
        .logout-button {
          width: 100%;
          text-align: center;
        }
      }
      
      /* JavaScript Effect for Sticky Header */
      </style>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>  <!-- Include jQuery -->
    <style>
        body { background-color: #f8f9fa; }
        .profile-container {
            max-width: 600px; background: white; padding: 20px;
            border-radius: 10px; box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);
            margin: 40px auto;
        }
        .form-label { font-weight: bold; }
        .profile-photo {
            display: block; margin: 10px auto; width: 100px; height: 100px;
            border-radius: 50%; object-fit: cover; border: 2px solid #ddd;
        }
        .btn-save {
            width: 100%; background-color: #007bff; color: white;
            font-size: 16px; padding: 10px; border: none; border-radius: 5px;
            transition: 0.3s;
        }
        .btn-save:hover { background-color: #0056b3; }
        .error-message { color: red; font-size: 14px; margin-top: 5px; }
        .success-message {
            color: green; font-size: 16px; text-align: center; display: none;
        }
    </style>
</head>
<body>
  <style>
    .full-screen {
        height: 100vh;
        width: 100%;
        display: flex;
        justify-content: center;
        background: url('{% static 'indexstyle/images/desginerhome/1993932096_preview_Circuits.jpg' %}') no-repeat center center/cover;
    }

    .profile-container1 {
        max-width: 600px;
        padding: 25px;
        border-radius: 12px;
        box-shadow: 0px 4px 12px rgba(0, 0, 0, 0.2);
        background: linear-gradient(to bottom, #e3f2fd, #bbdefb);
        color: white;
        text-align: center;
    }

    .profile-photo {
        width: 110px;
        height: 110px;
        border-radius: 50%;
        border: 3px solid #f8f9fa;
        object-fit: cover;
    }

    .btn-save {
        background: #ffcc00;
        color: black;
        padding: 12px;
        border: none;
        border-radius: 6px;
        font-size: 17px;
        cursor: pointer;
        width: 100%;
        font-weight: bold;
        transition: background 0.3s ease;
    }

    .btn-save:hover {
        background: #e6b800;
    }
</style>

<div class="full-screen">
    <div class="profile-container1"> <!-- Changed from profile-container to profile-container1 -->
            <h2 class="text-center">Designer Profile</h2>

            <!-- Profile Picture Display -->
            {% if form.instance.photo %}
                <img src="{{ form.instance.photo.url }}" alt="Profile Photo" class="profile-photo">
            {% else %}
                <img src="https://via.placeholder.com/100" alt="Profile Photo" class="profile-photo">
            {% endif %}

            <!-- Success Message -->
            <div class="success-message" id="success-message"></div>

            <!-- Profile Form -->
            <form id="profileForm" method="POST" enctype="multipart/form-data" class="mt-3">
                {% csrf_token %}

                <div class="mb-3">
                    <label class="form-label">Name:</label>
                    {{ form.name }}
                    <div class="error-message" id="error-name"></div>
                </div>

                <div class="mb-3">
                    <label class="form-label">Phone Number:</label>
                    {{ form.phonenumber }}
                    <div class="error-message" id="error-phonenumber"></div>
                </div>

                <div class="mb-3">
                    <label class="form-label">Qualification:</label>
                    {{ form.qualification }}
                </div>

                <div class="mb-3">
                    <label class="form-label">Description:</label>
                    {{ form.description }}
                </div>

                <div class="mb-3">
                    <label class="form-label">Profile Photo:</label>
                    {{ form.photo }}
                </div>

                <div class="mb-3">
                    <label class="form-label">Email:</label>
                    {{ form.email }}
                    <div class="error-message" id="error-email"></div>
                </div>

                <div class="mb-3">
                    <label class="form-label">Current Password:</label>
                    {{ form.current_password }}
                    <div class="error-message" id="error-current_password"></div>
                </div>

                <div class="mb-3">
                    <label class="form-label">New Password:</label>
                    {{ form.new_password }}
                    <div class="error-message" id="error-new_password"></div>
                </div>

                <button type="submit" class="btn-save">Save Changes</button>
            </form>
        </div>
    </div>
  </div>  

    <script>
        $(document).ready(function() {
            $("#profileForm").submit(function(event) {
                event.preventDefault(); // Prevent form from reloading the page

                var formData = new FormData(this);

                $.ajax({
                    type: "POST",
                    url: "{% url 'profile' %}",  // Make sure this URL is correct
                    data: formData,
                    processData: false,
                    contentType: false,
                    dataType: "json",
                    success: function(response) {
                        $("#success-message").text(response.message).fadeIn().delay(3000).fadeOut();

                        // Clear error messages on success
                        $(".error-message").text("");
                    },
                    error: function(xhr) {
                        var errors = xhr.responseJSON.errors;
                        $(".error-message").text("");  // Clear previous errors

                        for (var key in errors) {
                            $("#error-" + key).text(errors[key][0]);
                        }
                    }
                });
            });
        });
    </script>

</body>
</html>
