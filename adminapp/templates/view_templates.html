{% extends 'adminnav.html' %}
{% block content %}

<div class="container">
    <h2 class="text-center my-4">Customer Added Templates</h2>
    
    <div class="row">
        {% for template in templates %}
            <div class="col-md-4">
                <div class="card">
                    <img src="{{ template.image.url }}" class="card-img-top" alt="Template Image">
                    <div class="card-body">
                        <h5 class="card-title">{{ template.name }}</h5>
                        <button class="btn btn-danger" onclick="deleteTemplate({{ template.id }})">
                            Delete
                        </button>
                    </div>
                </div>
            </div>
        {% empty %}
            <p class="text-center">No customer templates available.</p>
        {% endfor %}
    </div>
</div>

<script>
    function deleteTemplate(templateId) {
        if (confirm("Are you sure you want to delete this template?")) {
            fetch(`/delete-template/${templateId}/`, {
                method: "POST",
                headers: {
                    "X-CSRFToken": "{{ csrf_token }}",
                },
            })
            .then(response => response.json())
            .then(data => {
                alert(data.message);
                location.reload(); // Refresh page to remove deleted template
            })
            .catch(error => console.error("Error deleting template:", error));
        }
    }
</script>

{% endblock %}
